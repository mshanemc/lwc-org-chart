<template>
  <lightning-card>
    <template if:false={searchMode}>
      <lightning-button-icon
        slot="actions"
        icon-name="utility:search"
        variant="bare"
        alternative-text="search"
        onclick={openSearch}
        size="large"
      ></lightning-button-icon>
      <div class="whole">
        <div class="managers">
          <c-org-chart-managers primary-user-id={primaryUserId} onuserselect={userChange}></c-org-chart-managers>
        </div>

        <div class="primary-user">
          <template if:true={primaryUser}>
            <div class="primary-user-band">
              <a href={mailTo}>
                <lightning-button-icon
                  variant="bare"
                  size="large"
                  icon-class="slds-m-around_medium"
                  icon-name="utility:email"
                  alternative-text="email"
                ></lightning-button-icon>
              </a>
              <div class="primary-user-details">
                <lightning-avatar
                  src={primaryUser.MediumPhotoUrl}
                  size="large"
                  fallback-icon-name="standard:user"
                  variant="circle"
                  onclick={toProfile}
                ></lightning-avatar>
                <div
                  class="slds-text-heading_medium slds-p-top_small slds-text-align_center slds-text-link"
                  onclick={toProfile}
                >
                  {primaryUser.Name}
                </div>
                <div class="slds-text-align_center slds-text-color_weak" onclick={toProfile}>
                  {primaryUser.Title}
                </div>
              </div>
              <a href={tel}>
                <lightning-button-icon
                  variant="bare"
                  size="large"
                  icon-class="slds-m-around_medium"
                  icon-name="utility:call"
                  alternative-text="phone"
                ></lightning-button-icon>
              </a>
            </div>
          </template>
        </div>

        <div class="reports">
          <c-org-chart-reports primary-user-id={primaryUserId} onuserselect={userChange}></c-org-chart-reports>
        </div>
      </div>
    </template>
    <template if:true={searchMode}>
      <c-org-chart-search onsearchcancel={cancelSearch} onuserselect={userChange}></c-org-chart-search>
    </template>
  </lightning-card>
</template>
